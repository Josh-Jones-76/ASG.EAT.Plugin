<UserControl x:Class="ASG.EAT.Plugin.Views.EATOptionsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:utility="clr-namespace:ASG.EAT.Plugin.Utility"
             mc:Ignorable="d"
             d:DesignWidth="450" d:DesignHeight="400"
             Background="{DynamicResource BackgroundBrush}"
             Foreground="{DynamicResource PrimaryBrush}">

    <UserControl.Resources>
        <utility:IntToBoolConverter x:Key="IntToBoolConverter"/>
    </UserControl.Resources>

    <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="10">
        <StackPanel>
            <TextBlock Text="ASG Electronic Assisted Tilt (EAT)"
                       FontSize="16" FontWeight="Bold" Margin="0,0,0,15"/>

            <Border BorderBrush="{DynamicResource BorderBrush}"
                    BorderThickness="1" CornerRadius="4" Padding="12" Margin="0,0,0,12">
                <StackPanel>
                    <TextBlock Text="Serial Connection" FontWeight="SemiBold" FontSize="13" Margin="0,0,0,10"/>

                    <!-- Status LED + text -->
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,10" HorizontalAlignment="Left">
                        <Ellipse Width="14" Height="14" Margin="0,0,8,0" VerticalAlignment="Center"
                                 Stroke="{DynamicResource BorderBrush}" StrokeThickness="1">
                            <Ellipse.Style>
                                <Style TargetType="Ellipse">
                                    <!-- Disconnected: gray -->
                                    <Setter Property="Fill" Value="#555555"/>
                                    <Style.Triggers>
                                        <!-- Connected: green -->
                                        <DataTrigger Binding="{Binding IsConnected}" Value="True">
                                            <Setter Property="Fill" Value="#22CC22"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Ellipse.Style>
                        </Ellipse>
                        <TextBlock Text="{Binding ConnectionStatus}"
                                   VerticalAlignment="Center" FontWeight="SemiBold" FontSize="11"/>
                    </StackPanel>

                    <Grid Margin="0,0,0,8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="120"/><ColumnDefinition Width="*"/><ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="COM Port:" VerticalAlignment="Center"/>
                        <ComboBox Grid.Column="1" ItemsSource="{Binding AvailablePorts}"
                                  SelectedItem="{Binding SelectedPort, Mode=TwoWay}" MinWidth="100" Margin="0,0,8,0"/>
                        <Button Grid.Column="2" Content="&#x27f3;"
                                Command="{Binding RefreshPortsCommand}"
                                ToolTip="Refresh COM ports"
                                Padding="12,8" FontSize="12"
                                Style="{StaticResource StandardButton}"/>
                    </Grid>
                    <Grid Margin="0,0,0,10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="120"/><ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="Baud Rate:" VerticalAlignment="Center"/>
                        <ComboBox Grid.Column="1" ItemsSource="{Binding AvailableBaudRates}"
                                  SelectedItem="{Binding BaudRate, Mode=TwoWay}" MinWidth="100"/>
                    </Grid>

                    <!-- Connect/Disconnect Buttons -->
                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Left">
                        <Button Command="{Binding ConnectCommand}"
                                Padding="16,8" Margin="0,0,8,0" MinHeight="36"
                                Style="{StaticResource StandardButton}">
                            <StackPanel Orientation="Horizontal" Margin="4,0,8,0">
                                <TextBlock Text="&#x1F50C;" FontSize="14" Margin="0,0,6,0" VerticalAlignment="Center"
                                           Foreground="{DynamicResource ButtonForegroundBrush}"/>
                                <TextBlock Text="Connect" FontSize="11" VerticalAlignment="Center"
                                           Foreground="{DynamicResource ButtonForegroundBrush}"/>
                            </StackPanel>
                        </Button>
                        <Button Command="{Binding DisconnectCommand}"
                                Padding="16,8" Margin="0,0,0,0" MinHeight="36"
                                Style="{StaticResource StandardButton}">
                            <StackPanel Orientation="Horizontal" Margin="4,0,8,0">
                                <TextBlock Text="&#x1F5D9;" FontSize="14" Margin="0,0,6,0" VerticalAlignment="Center"
                                           Foreground="{DynamicResource ButtonForegroundBrush}"/>
                                <TextBlock Text="Disconnect" FontSize="11" VerticalAlignment="Center"
                                           Foreground="{DynamicResource ButtonForegroundBrush}"/>
                            </StackPanel>
                        </Button>
                    </StackPanel>
                </StackPanel>
            </Border>

            <Border BorderBrush="{DynamicResource BorderBrush}"
                    BorderThickness="1" CornerRadius="4" Padding="12" Margin="0,0,0,12">
                <StackPanel>
                    <TextBlock Text="NINA Preferences" FontWeight="SemiBold" FontSize="13" Margin="0,0,0,10"/>

                    <!-- Default Step Size -->
                    <Grid Margin="0,0,0,8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="150"/><ColumnDefinition Width="80"/><ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="Default Step Size:" VerticalAlignment="Center"/>
                        <TextBox Grid.Column="1" Text="{Binding DefaultStepSize, Mode=TwoWay, UpdateSourceTrigger=LostFocus}" HorizontalContentAlignment="Right"/>
                        <TextBlock Grid.Column="2" Text=" steps - Set the default step size in the docked window. Recommended 1-25."
                                   VerticalAlignment="Center" FontSize="10" Opacity="0.8" Margin="4,0,0,0"/>
                    </Grid>

                    <!-- EAT Motor Step Size -->
                    <Grid Margin="0,0,0,8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="150"/><ColumnDefinition Width="80"/><ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="EAT Motor Step Size:" VerticalAlignment="Center"/>
                        <TextBox Grid.Column="1" Text="{Binding MotorStepSizeMicrons, Mode=TwoWay, UpdateSourceTrigger=LostFocus, StringFormat=F2}" HorizontalContentAlignment="Right"/>
                        <TextBlock Grid.Column="2" Text=" microns - Backfocus movement per motor step. Default 1.8 microns."
                                   VerticalAlignment="Center" FontSize="10" Opacity="0.8" Margin="4,0,0,0"/>
                    </Grid>

                    <!-- Sensor Color -->
                    <Grid Margin="0,0,0,8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="150"/><ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="Sensor Color:" VerticalAlignment="Center"/>
                        <StackPanel Grid.Column="1" Orientation="Horizontal">
                            <ComboBox ItemsSource="{Binding AvailableSensorColors}"
                                      SelectedItem="{Binding SensorColor, Mode=TwoWay}"
                                      MinWidth="120">
                                <ComboBox.ItemTemplate>
                                    <DataTemplate>
                                        <StackPanel Orientation="Horizontal">
                                            <Rectangle Width="20" Height="14" Fill="{Binding}" Margin="0,0,8,0"
                                                      Stroke="{DynamicResource BorderBrush}" StrokeThickness="1"/>
                                            <TextBlock Text="{Binding}" VerticalAlignment="Center"/>
                                        </StackPanel>
                                    </DataTemplate>
                                </ComboBox.ItemTemplate>
                            </ComboBox>
                        </StackPanel>
                    </Grid>

                    <!-- Show Raw Command -->
                    <Grid Margin="0,0,0,8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="150"/><ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="Show Raw Command:" VerticalAlignment="Center" FontSize="11"/>
                        <CheckBox Grid.Column="1" IsChecked="{Binding ShowRawCommand, Mode=TwoWay}"
                                  VerticalAlignment="Center" HorizontalAlignment="Left"/>
                    </Grid>

                    <!-- Show Activity Log -->
                    <Grid Margin="0,0,0,8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="150"/><ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="Show Activity Log:" VerticalAlignment="Center" FontSize="11"/>
                        <CheckBox Grid.Column="1" IsChecked="{Binding ShowActivityLog, Mode=TwoWay}"
                                  VerticalAlignment="Center" HorizontalAlignment="Left"/>
                    </Grid>

                    <!-- Motor Configuration (Arduino commands: cA, cB, cC) -->
                    <Separator Margin="0,8,0,8"/>
                    <TextBlock Text="EAT Motor Settings" FontWeight="SemiBold" FontSize="12" Margin="0,0,0,4"/>

                    <!-- Connection warning for Motor Configuration -->
                    <TextBlock Text="⚠ Connect to EAT to adjust settings"
                               FontSize="10"
                               Foreground="Red"
                               Margin="0,0,0,8"
                               FontStyle="Italic">
                        <TextBlock.Style>
                            <Style TargetType="TextBlock">
                                <Setter Property="Visibility" Value="Collapsed"/>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding IsConnected}" Value="False">
                                        <Setter Property="Visibility" Value="Visible"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </TextBlock.Style>
                    </TextBlock>

                    <Grid Margin="0,0,0,8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="150"/><ColumnDefinition Width="80"/><ColumnDefinition Width="Auto"/><ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="Speed:" VerticalAlignment="Center"/>
                        <TextBox Grid.Column="1" Text="{Binding MotorSpeed, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" HorizontalContentAlignment="Right"/>
                        <Button Grid.Column="2" Content="Save" Command="{Binding SaveSpeedCommand}"
                                Padding="12,4" Margin="8,0,0,0" MinWidth="60"/>
                        <TextBlock Grid.Column="3" Text=" Set the Speed of motors. Recommended 100-200." VerticalAlignment="Center" Margin="8,0,0,0" FontSize="10" Opacity="0.6"/>
                    </Grid>

                    <Grid Margin="0,0,0,8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="150"/><ColumnDefinition Width="80"/><ColumnDefinition Width="Auto"/><ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="Max Speed:" VerticalAlignment="Center"/>
                        <TextBox Grid.Column="1" Text="{Binding MotorMaxSpeed, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" HorizontalContentAlignment="Right"/>
                        <Button Grid.Column="2" Content="Save" Command="{Binding SaveMaxSpeedCommand}"
                                Padding="12,4" Margin="8,0,0,0" MinWidth="60"/>
                        <TextBlock Grid.Column="3" Text=" Set the Max Speed of motors. Recommended 100-200." VerticalAlignment="Center" Margin="8,0,0,0" FontSize="10" Opacity="0.6"/>
                    </Grid>

                    <Grid Margin="0,0,0,8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="150"/><ColumnDefinition Width="80"/><ColumnDefinition Width="Auto"/><ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="Acceleration:" VerticalAlignment="Center"/>
                        <TextBox Grid.Column="1" Text="{Binding MotorAcceleration, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" HorizontalContentAlignment="Right"/>
                        <Button Grid.Column="2" Content="Save" Command="{Binding SaveAccelerationCommand}"
                                Padding="12,4" Margin="8,0,0,0" MinWidth="60"/>
                        <TextBlock Grid.Column="3" Text=" Set the Acceleration of motors. Recommended 200-300." VerticalAlignment="Center" Margin="8,0,0,0" FontSize="10" Opacity="0.6"/>
                    </Grid>

                    <!-- Orientation Selection -->
                    <Separator Margin="0,8,0,8"/>
                    <TextBlock Text="EAT Camera Orientation" FontWeight="SemiBold" FontSize="12" Margin="0,0,0,4"/>

                    <TextBlock TextWrapping="Wrap" FontSize="12" Opacity="0.8" Margin="0,0,0,8">
                        It is important to keep track of your camera orientation when you install it into the EAT.
                        The long edge of your sensor should be in either Orientation #1 &amp; #3 or if you rotated it
                        may be Orientation #2 or #4. Keep track of the long edge of your sensor so you know you are
                        in one of two possible orientations.
                    </TextBlock>

                    <!-- Connection warning for Device Orientation -->
                    <TextBlock Text="⚠ Connect to EAT to adjust settings"
                               FontSize="10"
                               Foreground="Red"
                               Margin="0,0,0,8"
                               FontStyle="Italic">
                        <TextBlock.Style>
                            <Style TargetType="TextBlock">
                                <Setter Property="Visibility" Value="Collapsed"/>
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding IsConnected}" Value="False">
                                        <Setter Property="Visibility" Value="Visible"/>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </TextBlock.Style>
                    </TextBlock>

                    <Grid Margin="0,0,0,12">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="560"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- Visual Preview: Layered Images with Physical Positions -->
                        <Grid Grid.Column="0" Width="540" Height="540" HorizontalAlignment="Left">
                            <!-- Outer image (bottom layer - static) -->
                            <Image Source="pack://application:,,,/ASG.EAT.Plugin;component/Assets/EAT-Outer.png"
                                   Stretch="Uniform" />

                            <!-- Inner image (top layer - rotates based on orientation) -->
                            <Image Source="pack://application:,,,/ASG.EAT.Plugin;component/Assets/EAT-Inner.png"
                                   Stretch="Uniform"
                                   RenderTransformOrigin="0.5,0.5">
                                <Image.RenderTransform>
                                    <RotateTransform Angle="{Binding InnerRotationAngle}"/>
                                </Image.RenderTransform>
                            </Image>

                            <!-- Physical Position Displays -->
                            <!-- Top-Left: M2 -->
                            <StackPanel HorizontalAlignment="Left" VerticalAlignment="Top" Margin="10,10,0,0">
                                <TextBlock Text="M2 - Physical Position:" FontSize="11" Opacity="0.7"/>
                                <TextBlock Text="{Binding PositionTL}" FontSize="13" FontFamily="Consolas" FontWeight="SemiBold"/>
                            </StackPanel>

                            <!-- Top-Right: M1 -->
                            <StackPanel HorizontalAlignment="Right" VerticalAlignment="Top" Margin="0,10,10,0">
                                <TextBlock Text="M1 - Physical Position:" FontSize="11" Opacity="0.7" TextAlignment="Right"/>
                                <TextBlock Text="{Binding PositionTR}" FontSize="13" FontFamily="Consolas" FontWeight="SemiBold" TextAlignment="Right"/>
                            </StackPanel>

                            <!-- Bottom-Left: M4 -->
                            <StackPanel HorizontalAlignment="Left" VerticalAlignment="Bottom" Margin="10,0,0,10">
                                <TextBlock Text="{Binding PositionBL}" FontSize="13" FontFamily="Consolas" FontWeight="SemiBold"/>
                                <TextBlock Text="M4 - Physical Position:" FontSize="11" Opacity="0.7"/>
                            </StackPanel>

                            <!-- Bottom-Right: M3 -->
                            <StackPanel HorizontalAlignment="Right" VerticalAlignment="Bottom" Margin="0,0,10,10">
                                <TextBlock Text="{Binding PositionBR}" FontSize="13" FontFamily="Consolas" FontWeight="SemiBold" TextAlignment="Right"/>
                                <TextBlock Text="M3 - Physical Position:" FontSize="11" Opacity="0.7" TextAlignment="Right"/>
                            </StackPanel>
                        </Grid>

                        <!-- Orientation & Motor Position Controls -->
                        <StackPanel Grid.Column="1" Margin="20,0,0,0" VerticalAlignment="Top">
                            <!-- Select Orientation (above Set Motor Positions) -->
                            <TextBlock Text="Select Orientation:" FontSize="13" FontWeight="SemiBold" Margin="0,0,0,8"/>

                            <RadioButton Content="Orientation #1 (0°)"
                                         IsChecked="{Binding Orientation, Converter={StaticResource IntToBoolConverter}, ConverterParameter=1}"
                                         IsEnabled="{Binding IsConnected}"
                                         Margin="0,0,0,6" FontSize="12"/>
                            <RadioButton Content="Orientation #2 (90°)"
                                         IsChecked="{Binding Orientation, Converter={StaticResource IntToBoolConverter}, ConverterParameter=2}"
                                         IsEnabled="{Binding IsConnected}"
                                         Margin="0,0,0,6" FontSize="12"/>
                            <RadioButton Content="Orientation #3 (180°)"
                                         IsChecked="{Binding Orientation, Converter={StaticResource IntToBoolConverter}, ConverterParameter=3}"
                                         IsEnabled="{Binding IsConnected}"
                                         Margin="0,0,0,6" FontSize="12"/>
                            <RadioButton Content="Orientation #4 (270°)"
                                         IsChecked="{Binding Orientation, Converter={StaticResource IntToBoolConverter}, ConverterParameter=4}"
                                         IsEnabled="{Binding IsConnected}"
                                         Margin="0,0,0,6" FontSize="12"/>

                            <!-- Set Motor Positions -->
                            <Separator Margin="0,10,0,10"/>
                            <StackPanel Orientation="Horizontal" Margin="0,0,0,4">
                                <TextBlock Text="&#x26A0;" FontSize="14" Foreground="#E8A317" VerticalAlignment="Center" Margin="0,0,6,0"/>
                                <TextBlock Text="Set Motor Positions" FontSize="13" FontWeight="SemiBold" VerticalAlignment="Center"/>
                            </StackPanel>
                            <TextBlock Text="Use with Caution" FontSize="11" FontWeight="SemiBold" Foreground="#E8A317" Margin="0,0,0,4"/>
                            <TextBlock Text="Set absolute position for each motor on the Arduino. Only use this if you know what you are doing."
                                       FontSize="11" Opacity="0.7" Margin="0,0,0,10" TextWrapping="Wrap"/>

                            <!-- M1 (TR) -->
                            <Grid Margin="0,0,0,6">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="45"/><ColumnDefinition Width="70"/><ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="M1:" VerticalAlignment="Center" FontSize="12" FontWeight="SemiBold"/>
                                <TextBox Grid.Column="1" Text="{Binding SetPositionM1, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                         HorizontalContentAlignment="Right" FontFamily="Consolas" IsEnabled="{Binding IsConnected}"/>
                                <Button Grid.Column="2" Content="Set" Command="{Binding SaveM1PositionCommand}"
                                        Padding="10,3" Margin="6,0,0,0" MinWidth="40" FontSize="11"/>
                            </Grid>

                            <!-- M2 (TL) -->
                            <Grid Margin="0,0,0,6">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="45"/><ColumnDefinition Width="70"/><ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="M2:" VerticalAlignment="Center" FontSize="12" FontWeight="SemiBold"/>
                                <TextBox Grid.Column="1" Text="{Binding SetPositionM2, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                         HorizontalContentAlignment="Right" FontFamily="Consolas" IsEnabled="{Binding IsConnected}"/>
                                <Button Grid.Column="2" Content="Set" Command="{Binding SaveM2PositionCommand}"
                                        Padding="10,3" Margin="6,0,0,0" MinWidth="40" FontSize="11"/>
                            </Grid>

                            <!-- M3 (BR) -->
                            <Grid Margin="0,0,0,6">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="45"/><ColumnDefinition Width="70"/><ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="M3:" VerticalAlignment="Center" FontSize="12" FontWeight="SemiBold"/>
                                <TextBox Grid.Column="1" Text="{Binding SetPositionM3, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                         HorizontalContentAlignment="Right" FontFamily="Consolas" IsEnabled="{Binding IsConnected}"/>
                                <Button Grid.Column="2" Content="Set" Command="{Binding SaveM3PositionCommand}"
                                        Padding="10,3" Margin="6,0,0,0" MinWidth="40" FontSize="11"/>
                            </Grid>

                            <!-- M4 (BL) -->
                            <Grid Margin="0,0,0,6">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="45"/><ColumnDefinition Width="70"/><ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Text="M4:" VerticalAlignment="Center" FontSize="12" FontWeight="SemiBold"/>
                                <TextBox Grid.Column="1" Text="{Binding SetPositionM4, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                         HorizontalContentAlignment="Right" FontFamily="Consolas" IsEnabled="{Binding IsConnected}"/>
                                <Button Grid.Column="2" Content="Set" Command="{Binding SaveM4PositionCommand}"
                                        Padding="10,3" Margin="6,0,0,0" MinWidth="40" FontSize="11"/>
                            </Grid>
                        </StackPanel>
                    </Grid>

                    <!-- Status message -->
                    <TextBlock Text="{Binding StatusMessage}" FontSize="11" Foreground="{DynamicResource PrimaryBrush}"
                               Margin="0,4,0,8" MinHeight="16"/>
                </StackPanel>
            </Border>

            <!-- Firmware Section -->
            <Border BorderBrush="{DynamicResource BorderBrush}"
                    BorderThickness="1" CornerRadius="4" Padding="12" Margin="0,0,0,12">
                <StackPanel>
                    <TextBlock Text="EAT Firmware" FontWeight="SemiBold" FontSize="13" Margin="0,0,0,10"/>

                    <Grid Margin="0,0,0,8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="150"/><ColumnDefinition Width="Auto"/><ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="Firmware Version:" VerticalAlignment="Center"/>
                        <TextBlock Grid.Column="1" Text="{Binding FirmwareVersion}" FontFamily="Consolas"
                                   FontWeight="SemiBold" FontSize="12" VerticalAlignment="Center" Margin="0,0,12,0"/>
                        <Button Grid.Column="2" Content="Check Firmware" Command="{Binding CheckFirmwareCommand}"
                                Padding="12,4" MinWidth="120" HorizontalAlignment="Left"/>
                    </Grid>

                    <TextBlock TextWrapping="Wrap" FontSize="12" Opacity="0.8" Margin="0,4,0,0">
                        To update firmware, use the ASG EAT PC Desktop Application.
                        Visit asgastronomy.com for the latest firmware updates and instructions.
                    </TextBlock>
                </StackPanel>
            </Border>

            <Border BorderBrush="{DynamicResource BorderBrush}"
                    BorderThickness="1" CornerRadius="4" Padding="12" Margin="0,0,0,12">
                <StackPanel>
                    <TextBlock Text="About" FontWeight="SemiBold" FontSize="13" Margin="0,0,0,10"/>

                    <!-- Plugin Version -->
                    <TextBlock TextWrapping="Wrap" Opacity="0.85" Margin="0,0,0,12">
                        <Bold>ASG Electronic Astronomical Tilt (EAT) Plugin v1.0.1</Bold>
                        <LineBreak/>
                        Controls the ASG EAT Arduino-based electronic tilt platform for precise optical train alignment and sensor tilt correction.
                    </TextBlock>

                    <Separator Margin="0,4,0,12"/>

                    <!-- Product Information -->
                    <TextBlock TextWrapping="Wrap" Opacity="0.85" Margin="0,0,0,12">
                        <Bold>ASG Electronic Photon Cage with EAT Technology</Bold>
                        <LineBreak/>
                        The ASG Electronic Photon Cage features Electronically Assisted Tilt (EAT) technology,
                        enabling remote precision adjustment of camera backfocus and tilt for astrophotography.
                        Dial in optical alignment from anywhere—whether in your backyard or remote observatory.
                    </TextBlock>

                    <!-- Key Features -->
                    <TextBlock TextWrapping="Wrap" Opacity="0.85" Margin="0,0,0,12">
                        <Bold>Key Features:</Bold>
                        <LineBreak/>
                        • Backfocus resolution: ~1.8 microns
                        <LineBreak/>
                        • Tilt resolution: ~0.6 microns at sensor
                        <LineBreak/>
                        • Total backfocus adjustment: ~2mm in/out
                        <LineBreak/>
                        • Lightweight: 23 oz head unit (RASA/Hyperstar compatible)
                        <LineBreak/>
                        • 136mm diameter with minimal central obstruction
                    </TextBlock>

                    <Separator Margin="0,4,0,12"/>

                    <!-- Company & Support Information -->
                    <TextBlock TextWrapping="Wrap" Opacity="0.85" Margin="0,0,0,8">
                        <Bold>About ASG Astronomy, LLC</Bold>
                        <LineBreak/>
                        Precision instruments designed to capture the Cosmos.
                    </TextBlock>

                    <TextBlock TextWrapping="Wrap" Opacity="0.8" Margin="0,0,0,12">
                        <Bold>Purchase Options:</Bold>
                        <LineBreak/>
                        Visit
                        <Hyperlink NavigateUri="https://asgastronomy.com/photon-cages/" RequestNavigate="Hyperlink_RequestNavigate">
                            asgastronomy.com/photon-cages/
                        </Hyperlink>
                        <LineBreak/>
                        Available in assorted colors to match your equipment.
                    </TextBlock>

                    <TextBlock TextWrapping="Wrap" Opacity="0.8" Margin="0,0,0,12">
                        <Bold>Need Help?</Bold>
                        <LineBreak/>
                        Contact us at
                        <Hyperlink NavigateUri="mailto:sales@asgastronomy.com" RequestNavigate="Hyperlink_RequestNavigate">
                            sales@asgastronomy.com
                        </Hyperlink>
                        <LineBreak/>
                        Visit
                        <Hyperlink NavigateUri="https://asgastronomy.com" RequestNavigate="Hyperlink_RequestNavigate">
                            asgastronomy.com
                        </Hyperlink>
                        for more information and educational content.
                    </TextBlock>

                    <Separator Margin="0,4,0,12"/>

                    <!-- Basic Commands -->
                    <TextBlock TextWrapping="Wrap" Opacity="0.85" Margin="0,0,0,8">
                        <Bold>Basic Commands</Bold>
                    </TextBlock>

                    <TextBlock TextWrapping="Wrap" Opacity="0.75" Margin="0,0,0,8" FontSize="11">
                        Corner commands: tr, tl, br, bl (paired 2-motor tilt)
                        <LineBreak/>
                        Direction commands: tp, bt, rt, lt (4-motor tilt)
                        <LineBreak/>
                        Backfocus: bf (all motors same direction)
                        <LineBreak/>
                        Utility: zr (zero), cp (positions), up (save EEPROM)
                    </TextBlock>
                </StackPanel>
            </Border>
        </StackPanel>
    </ScrollViewer>
</UserControl>
