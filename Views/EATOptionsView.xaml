<UserControl x:Class="ASG.EAT.Plugin.Views.EATOptionsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             d:DesignWidth="450" d:DesignHeight="400"
             Background="{DynamicResource BackgroundBrush}"
             Foreground="{DynamicResource PrimaryBrush}">

    <ScrollViewer VerticalScrollBarVisibility="Auto" Padding="10">
        <StackPanel>
            <TextBlock Text="ASG Electronic Assisted Tilt (EAT)" 
                       FontSize="16" FontWeight="Bold" Margin="0,0,0,5"/>
            <TextBlock Text="Plugin Settings" FontSize="12" Opacity="0.7" Margin="0,0,0,15"/>

            <Border BorderBrush="{DynamicResource BorderBrush}" 
                    BorderThickness="1" CornerRadius="4" Padding="12" Margin="0,0,0,12">
                <StackPanel>
                    <TextBlock Text="Serial Connection" FontWeight="SemiBold" FontSize="13" Margin="0,0,0,10"/>
                    <Grid Margin="0,0,0,8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="120"/><ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="COM Port:" VerticalAlignment="Center"/>
                        <ComboBox Grid.Column="1" ItemsSource="{Binding AvailablePorts}" 
                                  SelectedItem="{Binding SelectedPort, Mode=TwoWay}" MinWidth="100"/>
                    </Grid>
                    <Grid Margin="0,0,0,8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="120"/><ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="Baud Rate:" VerticalAlignment="Center"/>
                        <ComboBox Grid.Column="1" ItemsSource="{Binding AvailableBaudRates}" 
                                  SelectedItem="{Binding BaudRate, Mode=TwoWay}" MinWidth="100"/>
                    </Grid>
                    <CheckBox Content="Auto-connect on NINA startup" 
                              IsChecked="{Binding AutoConnectOnStartup, Mode=TwoWay}" Margin="0,4,0,0"/>
                </StackPanel>
            </Border>

            <Border BorderBrush="{DynamicResource BorderBrush}" 
                    BorderThickness="1" CornerRadius="4" Padding="12" Margin="0,0,0,12">
                <StackPanel>
                    <TextBlock Text="Device Preferences" FontWeight="SemiBold" FontSize="13" Margin="0,0,0,10"/>
                    <Grid Margin="0,0,0,8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="150"/><ColumnDefinition Width="80"/><ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="Command Timeout:" VerticalAlignment="Center"/>
                        <TextBox Grid.Column="1" Text="{Binding CommandTimeoutMs, Mode=TwoWay, UpdateSourceTrigger=LostFocus}" HorizontalContentAlignment="Right"/>
                        <TextBlock Grid.Column="2" Text=" ms" VerticalAlignment="Center"/>
                    </Grid>
                    <Grid Margin="0,0,0,8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="150"/><ColumnDefinition Width="80"/><ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="Default Speed:" VerticalAlignment="Center"/>
                        <TextBox Grid.Column="1" Text="{Binding DefaultSpeed, Mode=TwoWay, UpdateSourceTrigger=LostFocus}" HorizontalContentAlignment="Right"/>
                        <TextBlock Grid.Column="2" Text=" steps/sec" VerticalAlignment="Center"/>
                    </Grid>
                    <Grid Margin="0,0,0,8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="150"/><ColumnDefinition Width="80"/><ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <TextBlock Text="Default Step Size:" VerticalAlignment="Center"/>
                        <TextBox Grid.Column="1" Text="{Binding DefaultStepSize, Mode=TwoWay, UpdateSourceTrigger=LostFocus}" HorizontalContentAlignment="Right"/>
                        <TextBlock Grid.Column="2" Text=" steps" VerticalAlignment="Center"/>
                    </Grid>
                    <CheckBox Content="Log serial traffic to debug output" 
                              IsChecked="{Binding LogSerialTraffic, Mode=TwoWay}" Margin="0,4,0,0"/>
                </StackPanel>
            </Border>

            <Border BorderBrush="{DynamicResource BorderBrush}" 
                    BorderThickness="1" CornerRadius="4" Padding="12" Margin="0,0,0,12">
                <StackPanel>
                    <TextBlock Text="About" FontWeight="SemiBold" FontSize="13" Margin="0,0,0,8"/>
                    <TextBlock TextWrapping="Wrap" Opacity="0.8">
                        ASG Electronic Astronomical Tilt (EAT) Plugin v1.0
                        <LineBreak/>
                        Controls the ASG EAT Arduino-based electronic tilt platform
                        for precise optical train alignment and sensor tilt correction.
                        <LineBreak/><LineBreak/>
                        Corner commands: tr, tl, br, bl (paired 2-motor tilt)
                        <LineBreak/>
                        Direction commands: tp, bt, rt, lt (4-motor tilt)
                        <LineBreak/>
                        Backfocus: bf (all motors same direction)
                        <LineBreak/>
                        Utility: zr (zero), cp (positions), up (save EEPROM)
                    </TextBlock>
                </StackPanel>
            </Border>
        </StackPanel>
    </ScrollViewer>
</UserControl>
